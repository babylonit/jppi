---
const pathname = Astro.url.pathname;

const navItems = [
  { name: 'Paper Products', href: '#', megaMenu: true, megaMenuId: 'paper-items' },
  { name: 'Eco Products', href: '#', megaMenu: true, megaMenuId: 'eco-items' },
  { name: 'Plastic Products', href: '#', megaMenu: true, megaMenuId: 'plastic-items' },
  { name: 'Become a Vendor', href: '/become-a-vendor', highlight: true },
  { name: 'FAQs', href: '/faq' },
  { name: 'About Us', href: '/about' },
  { name: 'Contact', href: '/contact' }
];

const isActive = (path: string) => {
  if (path === '/') {
    return pathname === '/';
  }
  return pathname.startsWith(path);
};
---

<header class="bg-white sticky top-0 z-50 shadow-sm">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-4 md:justify-start md:space-x-10">
      <!-- Logo -->
      <div class="flex justify-start lg:w-0 lg:flex-1">
        <a href="/" class="flex items-center">
          <span class="sr-only">Joana Paper Product Industry</span>
          <img class="h-10 w-auto sm:h-12" src="/images/joana-logo.png" alt="Joana Paper Product Industry Logo">
        </a>
      </div>
      
      <!-- Mobile menu button -->
      <div class="-mr-2 -my-2 md:hidden">
        <button type="button" id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500">
          <span class="sr-only">Open menu</span>
          <i class="fas fa-bars h-6 w-6" aria-hidden="true"></i>
        </button>
      </div>
      
      <!-- Desktop navigation -->
      <nav class="hidden md:flex space-x-8 relative">
        {navItems.map(item => (
          <div class="relative mega-menu-container">
            {item.megaMenu ? (
              <button 
                class:list={[
                  'mega-menu-trigger text-base font-medium transition-colors hover:text-primary-600 relative flex items-center',
                  'text-gray-700'
                ]}
                data-mega-menu={item.megaMenuId}
              >
                {item.name}
                <i class="fas fa-chevron-down ml-1 text-xs transition-transform mega-menu-icon"></i>
              </button>
            ) : (
              <a 
                href={item.href}
                class:list={[
                  'text-base font-medium transition-colors hover:text-primary-600 relative',
                  isActive(item.href) ? 'text-primary-600 font-semibold' : 'text-gray-700',
                  item.highlight && !isActive(item.href) ? 'distributor-highlight' : ''
                ]}
              >
                {item.name}
                {item.highlight && !isActive(item.href) && (
                  <span class="absolute -top-1 -right-2 flex h-3 w-3">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-primary-500"></span>
                  </span>
                )}
              </a>
            )}
            
            <!-- Mega Menu Dropdowns -->
            {item.megaMenuId === 'paper-items' && (
              <div class="mega-menu absolute left-0 top-full mt-2 w-screen max-w-5xl bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transform translate-y-4 transition-all duration-300 ease-out z-50">
                <div class="p-6">
                  <div class="grid grid-cols-3 gap-8">
                    <!-- Column 1: Paper Cups -->
                    <div>
                      <div class="bg-primary-500 text-white px-3 py-2 rounded-md mb-4">
                        <h3 class="font-semibold text-sm">Paper Cups</h3>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <a href="/disposable-paper-cups" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Disposable Paper Cups
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>50ml Paper Cup</li>
                            <li>60ml Paper Cup</li>
                            <li>80ml Paper Cup</li>
                            <li>100ml Paper Cup</li>
                            <li>120ml Paper Cup</li>
                            <li>150ml Paper Cup</li>
                            <li>200ml Paper Cup</li>
                            <li>250ml Paper Cup</li>
                            <li>350ml Paper Cup</li>
                            <li>400ml Paper Cup</li>
                            <li>Custom-Size Paper Cups</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/disposable-paper-cups" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Other Cups
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Double Wall Cups</li>
                            <li>Ripple Wall Cups</li>
                            <li>Coffee Sleeves</li>
                            <li>Ice-cream Cup</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Column 2: Paper Packaging -->
                    <div>
                      <div class="bg-primary-500 text-white px-3 py-2 rounded-md mb-4">
                        <h3 class="font-semibold text-sm">Paper Packaging</h3>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <a href="/food-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Food Packaging
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Pizza Box</li>
                            <li>Burger Boxes</li>
                            <li>Food Containers</li>
                            <li>Lunch Boxes</li>
                            <li>Sandwich Boxes</li>
                            <li>Cake Boxes</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/retail-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Retail Packaging
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Shopping Bags</li>
                            <li>Courier Bags</li>
                            <li>Product Labels</li>
                            <li>Custom Packaging</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/medical-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Medical Packaging
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Medicine Packaging</li>
                            <li>Patient Files</li>
                            <li>X-Ray Envelopes</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Column 3: Offset Printing -->
                    <div>
                      <div class="bg-primary-500 text-white px-3 py-2 rounded-md mb-4">
                        <h3 class="font-semibold text-sm">Offset Printing</h3>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <a href="/office-stationery" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Office Stationery
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Business Cards</li>
                            <li>Letterheads</li>
                            <li>Invoices</li>
                            <li>Envelopes</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/marketing-materials" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Marketing Materials
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Brochures</li>
                            <li>Flyers</li>
                            <li>Catalogs</li>
                            <li>Banners</li>
                            <li>Stickers</li>
                            <li>Hang tags</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {item.megaMenuId === 'eco-items' && (
              <div class="mega-menu absolute left-0 top-full mt-2 w-screen max-w-3xl bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transform translate-y-4 transition-all duration-300 ease-out z-50">
                <div class="p-6">
                  <div class="grid grid-cols-2 gap-8">
                    <!-- Column 1: Areca Palm Products -->
                    <div>
                      <a href="/areca-palm-products" class="block font-semibold text-gray-900 hover:text-primary-600 mb-3 transition-colors">
                        Areca Palm leaf Products
                      </a>
                      <ul class="space-y-1 text-sm text-gray-600 ml-2">
                        <li>Areca palm leaf plates</li>
                        <li>Areca palm leaf Tray</li>
                        <li>Areca Leaf Bowl</li>
                        <li>Partitioned Plate</li>
                        <li>Square Plate</li>
                      </ul>
                    </div>
                    
                    <!-- Column 2: Wooden Products -->
                    <div>
                      <a href="/wooden-items" class="block font-semibold text-gray-900 hover:text-primary-600 mb-3 transition-colors">
                        Wooden Product
                      </a>
                      <ul class="space-y-1 text-sm text-gray-600 ml-2">
                        <li>Wooden Plates</li>
                        <li>Wooden Tray</li>
                        <li>Cutlery Set</li>
                        <li>Wooden Spoon</li>
                        <li>Wooden Fork</li>
                        <li>Bamboo Brush</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {item.megaMenuId === 'plastic-items' && (
              <div class="mega-menu absolute left-0 top-full mt-2 w-screen max-w-md bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transform translate-y-4 transition-all duration-300 ease-out z-50">
                <div class="p-6">
                  <div>
                    <a href="/plastic-food-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-3 transition-colors">
                      Plastic Food Packaging
                    </a>
                    <ul class="space-y-1 text-sm text-gray-600 ml-2">
                      <li>Container/box</li>
                      <li>Cup</li>
                      <li>Takeaway Container Spoon</li>
                      <li>Straw</li>
                      <li>Strailer</li>
                      <li>Ice Cream Box</li>
                      <li>Pizza Lid Support</li>
                      <li>Water Bottle</li>
                      <li>Food Tray 4 Unit With Lid</li>
                      <li>Dry Cake Biscuit Tray</li>
                      <li>Thai Burger Box</li>
                      <li>Egg Tray</li>
                      <li>Sandwich Box</li>
                    </ul>
                  </div>
                </div>
              </div>
            )}
          </div>
        ))}
      </nav>
      
      <!-- CTA button -->
      <div class="hidden md:flex items-center justify-end md:flex-1 lg:w-0">
        <a href="tel:+8801976724401" class="btn btn-primary shadow-sm whitespace-nowrap px-4">
          01976724401
        </a>
      </div>
    </div>
  </div>
  
  <!-- Enhanced Mobile menu -->
  <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-white shadow-lg rounded-b-lg max-h-screen overflow-y-auto">
    <div class="py-4 px-4 space-y-3">
      <!-- Mobile Paper Products Accordion -->
      <div class="mobile-accordion border border-gray-200 rounded-lg">
        <button class="mobile-accordion-trigger w-full text-left px-4 py-4 rounded-lg text-lg font-bold text-gray-800 hover:bg-gray-50 flex justify-between items-center bg-gray-50">
          <div class="flex items-center">
            <i class="fas fa-file-alt text-primary-600 mr-3 text-xl"></i>
            <span class="text-lg">Paper Products</span>
          </div>
          <i class="fas fa-chevron-down text-sm transition-transform mobile-accordion-icon text-primary-600"></i>
        </button>
        <div class="mobile-accordion-content hidden px-4 pb-4 space-y-5">
          <!-- Paper Cups -->
          <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
            <a href="/disposable-paper-cups" class="block font-bold text-blue-700 mb-3 text-base hover:text-blue-800">
              <i class="fas fa-coffee mr-2"></i>Disposable Paper Cups
            </a>
            <div class="space-y-1 text-sm text-blue-600 ml-2">
              <div class="font-medium">50ml Paper Cup</div>
              <div class="font-medium">60ml Paper Cup</div>
              <div class="font-medium">80ml Paper Cup</div>
              <div class="font-medium">100ml Paper Cup</div>
              <div class="font-medium">120ml Paper Cup</div>
              <div class="font-medium">150ml Paper Cup</div>
              <div class="font-medium">200ml Paper Cup</div>
              <div class="font-medium">250ml Paper Cup</div>
              <div class="font-medium">350ml Paper Cup</div>
              <div class="font-medium">400ml Paper Cup</div>
              <div class="font-medium">Custom-Size Paper Cups</div>
            </div>
            
            <div class="mt-4">
              <p class="font-bold text-blue-700 mb-2 text-base">Other Cups</p>
              <div class="space-y-1 text-sm text-blue-600 ml-2">
                <div class="font-medium">Double Wall Cups</div>
                <div class="font-medium">Ripple Wall Cups</div>
                <div class="font-medium">Coffee Sleeves</div>
                <div class="font-medium">Ice-cream Cup</div>
              </div>
            </div>
          </div>
          
          <!-- Food Packaging -->
          <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
            <a href="/food-packaging" class="block font-bold text-green-700 mb-3 text-base hover:text-green-800">
              <i class="fas fa-utensils mr-2"></i>Food Packaging
            </a>
            <div class="space-y-1 text-sm text-green-600 ml-2">
              <div class="font-medium">Pizza Box</div>
              <div class="font-medium">Burger Boxes</div>
              <div class="font-medium">Food Containers</div>
              <div class="font-medium">Lunch Boxes</div>
              <div class="font-medium">Sandwich Boxes</div>
              <div class="font-medium">Cake Boxes</div>
            </div>
          </div>
          
          <!-- Retail Packaging -->
          <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
            <a href="/retail-packaging" class="block font-bold text-purple-700 mb-3 text-base hover:text-purple-800">
              <i class="fas fa-shopping-bag mr-2"></i>Retail Packaging
            </a>
            <div class="space-y-1 text-sm text-purple-600 ml-2">
              <div class="font-medium">Shopping Bags</div>
              <div class="font-medium">Courier Bags</div>
              <div class="font-medium">Product Labels</div>
              <div class="font-medium">Custom Packaging</div>
            </div>
          </div>
          
          <!-- Medical Packaging -->
          <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
            <a href="/medical-packaging" class="block font-bold text-red-700 mb-3 text-base hover:text-red-800">
              <i class="fas fa-heartbeat mr-2"></i>Medical Packaging
            </a>
            <div class="space-y-1 text-sm text-red-600 ml-2">
              <div class="font-medium">Medicine Packaging</div>
              <div class="font-medium">Patient Files</div>
              <div class="font-medium">X-Ray Envelopes</div>
            </div>
          </div>
          
          <!-- Office Stationery -->
          <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
            <a href="/office-stationery" class="block font-bold text-indigo-700 mb-3 text-base hover:text-indigo-800">
              <i class="fas fa-clipboard mr-2"></i>Office Stationery
            </a>
            <div class="space-y-1 text-sm text-indigo-600 ml-2">
              <div class="font-medium">Business Cards</div>
              <div class="font-medium">Letterheads</div>
              <div class="font-medium">Invoices</div>
              <div class="font-medium">Envelopes</div>
            </div>
          </div>
          
          <!-- Marketing Materials -->
          <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
            <a href="/marketing-materials" class="block font-bold text-orange-700 mb-3 text-base hover:text-orange-800">
              <i class="fas fa-bullhorn mr-2"></i>Marketing Materials
            </a>
            <div class="space-y-1 text-sm text-orange-600 ml-2">
              <div class="font-medium">Brochures</div>
              <div class="font-medium">Flyers</div>
              <div class="font-medium">Catalogs</div>
              <div class="font-medium">Banners</div>
              <div class="font-medium">Stickers</div>
              <div class="font-medium">Hang tags</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Mobile Eco Products Accordion -->
      <div class="mobile-accordion border border-gray-200 rounded-lg">
        <button class="mobile-accordion-trigger w-full text-left px-4 py-4 rounded-lg text-lg font-bold text-gray-800 hover:bg-gray-50 flex justify-between items-center bg-green-50">
          <div class="flex items-center">
            <i class="fas fa-leaf text-green-600 mr-3 text-xl"></i>
            <span class="text-lg">Eco Products</span>
          </div>
          <i class="fas fa-chevron-down text-sm transition-transform mobile-accordion-icon text-green-600"></i>
        </button>
        <div class="mobile-accordion-content hidden px-4 pb-4 space-y-5">
          <!-- Areca Palm Products -->
          <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
            <a href="/areca-palm-products" class="block font-bold text-green-700 mb-3 text-base hover:text-green-800">
              <i class="fas fa-seedling mr-2"></i>Areca Palm Products
            </a>
            <div class="space-y-2 text-sm text-green-600">
              <div class="font-medium">• Areca Palm Leaf Plates</div>
              <div class="font-medium">• Areca Palm Leaf Trays</div>
              <div class="font-medium">• Areca Leaf Bowls</div>
              <div class="font-medium">• Partitioned & Square Plates</div>
            </div>
          </div>
          
          <!-- Wooden Products -->
          <div class="bg-amber-50 p-4 rounded-lg border-l-4 border-amber-500">
            <a href="/wooden-items" class="block font-bold text-amber-700 mb-3 text-base hover:text-amber-800">
              <i class="fas fa-tree mr-2"></i>Wooden Products
            </a>
            <div class="space-y-2 text-sm text-amber-600">
              <div class="font-medium">• Wooden Plates & Trays</div>
              <div class="font-medium">• Cutlery Sets</div>
              <div class="font-medium">• Wooden Spoons & Forks</div>
              <div class="font-medium">• Bamboo Brushes</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Mobile Plastic Products Accordion -->
      <div class="mobile-accordion border border-gray-200 rounded-lg">
        <button class="mobile-accordion-trigger w-full text-left px-4 py-4 rounded-lg text-lg font-bold text-gray-800 hover:bg-gray-50 flex justify-between items-center bg-blue-50">
          <div class="flex items-center">
            <i class="fas fa-cube text-blue-600 mr-3 text-xl"></i>
            <span class="text-lg">Plastic Products</span>
          </div>
          <i class="fas fa-chevron-down text-sm transition-transform mobile-accordion-icon text-blue-600"></i>
        </button>
        <div class="mobile-accordion-content hidden px-4 pb-4 space-y-5">
          <!-- Plastic Food Packaging -->
          <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
            <a href="/plastic-food-packaging" class="block font-bold text-blue-700 mb-3 text-base hover:text-blue-800">
              <i class="fas fa-box mr-2"></i>Plastic Food Packaging
            </a>
            <div class="grid grid-cols-1 gap-2 text-sm text-blue-600">
              <div class="font-medium">• Container/Box</div>
              <div class="font-medium">• Plastic Cups</div>
              <div class="font-medium">• Takeaway Spoons</div>
              <div class="font-medium">• Straws & Strailers</div>
              <div class="font-medium">• Ice Cream Boxes</div>
              <div class="font-medium">• Water Bottles</div>
              <div class="font-medium">• Food Tray (4-Unit)</div>
              <div class="font-medium">• Thai Burger Boxes</div>
              <div class="font-medium">• Sandwich Boxes</div>
              <div class="font-medium">• Egg Trays</div>
              <div class="font-medium">• Pizza Lid Supports</div>
              <div class="font-medium">• Cake Biscuit Trays</div>
              <div class="font-medium">• Dry Cake Trays</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Regular Mobile Menu Items -->
      <div class="space-y-3 mt-6 pt-4 border-t border-gray-200">
        <a href="/become-a-vendor" class="flex items-center px-4 py-4 rounded-lg text-lg font-bold text-gray-700 hover:bg-gray-50 hover:text-primary-600 mobile-distributor-highlight relative bg-primary-50">
          <i class="fas fa-store text-primary-600 mr-3 text-xl"></i>
          Become a Vendor
          <span class="absolute top-3 right-3 flex h-3 w-3">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-3 w-3 bg-primary-500"></span>
          </span>
        </a>
        <a href="/faq" class="flex items-center px-4 py-4 rounded-lg text-lg font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600">
          <i class="fas fa-question-circle text-gray-500 mr-3 text-xl"></i>
          FAQs
        </a>
        <a href="/about" class="flex items-center px-4 py-4 rounded-lg text-lg font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600">
          <i class="fas fa-info-circle text-gray-500 mr-3 text-xl"></i>
          About Us
        </a>
        <a href="/contact" class="flex items-center px-4 py-4 rounded-lg text-lg font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600">
          <i class="fas fa-envelope text-gray-500 mr-3 text-xl"></i>
          Contact
        </a>
      </div>
      
      <!-- Mobile CTA -->
      <div class="mt-6 pt-4 border-t border-gray-200">
        <a href="/contact" class="block w-full btn btn-primary text-center py-4 rounded-lg text-lg font-bold">
          <i class="fas fa-phone mr-2 text-lg"></i>
          Get a Quote
        </a>
      </div>
    </div>
  </div>
</header>

<style>
  /* Mega Menu Styles - FIXED POSITIONING */
  .mega-menu-container:hover .mega-menu {
    @apply opacity-100 visible translate-y-0;
  }
  
  .mega-menu-container:hover .mega-menu-icon {
    @apply transform rotate-180;
  }
  
  /* FIXED: Better positioning for mega menus */
  .mega-menu {
    left: -100px; /* Move slightly to the right */
    transform: translateY(1rem);
  }
  
  .mega-menu-container:hover .mega-menu {
    transform: translateY(0);
  }
  
  /* Distributor highlight */
  .distributor-highlight {
    text-shadow: 0 0 5px rgba(0, 128, 1, 0.3);
    font-weight: 600;
    transition: transform 0.3s ease, text-shadow 0.3s ease;
  }
  
  .distributor-highlight:hover {
    transform: scale(1.05);
    text-shadow: 0 0 8px rgba(0, 128, 1, 0.5);
  }
  
  .mobile-distributor-highlight {
    font-weight: 600;
  }
  
  .distributor-highlight::after {
    content: '✨';
    position: absolute;
    top: -8px;
    right: -12px;
    font-size: 14px;
    animation: sparkle 1.5s infinite;
    opacity: 0.9;
  }
  
  @keyframes sparkle {
    0% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
    50% { opacity: 1; transform: scale(1.1) rotate(10deg); }
    100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
  }
  
  /* ENHANCED Mobile accordion styles */
  .mobile-accordion {
    transition: all 0.2s ease;
  }
  
  .mobile-accordion-trigger {
    transition: all 0.2s ease;
  }
  
  .mobile-accordion-trigger.active {
    background-color: #f9fafb;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
  
  .mobile-accordion-trigger.active .mobile-accordion-icon {
    @apply transform rotate-180;
  }
  
  .mobile-accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.2s ease;
  }
  
  .mobile-accordion-trigger.active + .mobile-accordion-content {
    max-height: 800px;
    padding-top: 1rem;
    padding-bottom: 1rem;
  }
  
  /* Mobile menu container */
  #mobile-menu {
    border-top: 2px solid #e5e7eb;
    background: white;
  }
</style>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());
      mobileMenu.classList.toggle('hidden');
    });
  }
  
  // Enhanced mobile accordion functionality
  const accordionTriggers = document.querySelectorAll('.mobile-accordion-trigger');
  
  accordionTriggers.forEach(trigger => {
    trigger.addEventListener('click', () => {
      const content = trigger.nextElementSibling;
      const isActive = trigger.classList.contains('active');
      
      // Close all other accordions with smooth animation
      accordionTriggers.forEach(otherTrigger => {
        if (otherTrigger !== trigger) {
          otherTrigger.classList.remove('active');
          const otherContent = otherTrigger.nextElementSibling;
          otherContent.classList.add('hidden');
          setTimeout(() => {
            otherContent.style.maxHeight = '0';
          }, 10);
        }
      });
      
      // Toggle current accordion
      if (!isActive) {
        trigger.classList.add('active');
        content.classList.remove('hidden');
        // Small delay to ensure smooth animation
        setTimeout(() => {
          content.style.maxHeight = content.scrollHeight + 'px';
        }, 10);
      } else {
        trigger.classList.remove('active');
        content.style.maxHeight = '0';
        setTimeout(() => {
          content.classList.add('hidden');
        }, 400);
      }
    });
  });
  
  // Close mobile menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('header') && mobileMenu && !mobileMenu.classList.contains('hidden')) {
      mobileMenu.classList.add('hidden');
      mobileMenuButton.setAttribute('aria-expanded', 'false');
    }
  });
  
  // Close mega menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.mega-menu-container')) {
      // Optional: Add logic to hide mega menus if needed
    }
  });
</script>