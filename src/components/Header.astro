---
const pathname = Astro.url.pathname;

const navItems = [
  { name: 'Paper Items', href: '#', megaMenu: true, megaMenuId: 'paper-items' },
  { name: 'Eco Items', href: '#', megaMenu: true, megaMenuId: 'eco-items' },
  { name: 'Plastic Items', href: '#', megaMenu: true, megaMenuId: 'plastic-items' },
  { name: 'Distributor', href: '/distributor', highlight: true },
  { name: 'FAQs', href: '/faq' },
  { name: 'About Us', href: '/about' },
  { name: 'Contact', href: '/contact' }
];

const isActive = (path: string) => {
  if (path === '/') {
    return pathname === '/';
  }
  return pathname.startsWith(path);
};
---

<header class="bg-white sticky top-0 z-50 shadow-sm">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-4 md:justify-start md:space-x-10">
      <!-- Logo -->
      <div class="flex justify-start lg:w-0 lg:flex-1">
        <a href="/" class="flex items-center">
          <span class="sr-only">Joana Paper Product Industry</span>
          <img class="h-10 w-auto sm:h-12" src="/images/joana-logo.png" alt="Joana Paper Product Industry Logo">
        </a>
      </div>
      
      <!-- Mobile menu button -->
      <div class="-mr-2 -my-2 md:hidden">
        <button type="button" id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500">
          <span class="sr-only">Open menu</span>
          <i class="fas fa-bars h-6 w-6" aria-hidden="true"></i>
        </button>
      </div>
      
      <!-- Desktop navigation -->
      <nav class="hidden md:flex space-x-8 relative">
        {navItems.map(item => (
          <div class="relative mega-menu-container">
            {item.megaMenu ? (
              <button 
                class:list={[
                  'mega-menu-trigger text-base font-medium transition-colors hover:text-primary-600 relative flex items-center',
                  'text-gray-700'
                ]}
                data-mega-menu={item.megaMenuId}
              >
                {item.name}
                <i class="fas fa-chevron-down ml-1 text-xs transition-transform mega-menu-icon"></i>
              </button>
            ) : (
              <a 
                href={item.href}
                class:list={[
                  'text-base font-medium transition-colors hover:text-primary-600 relative',
                  isActive(item.href) ? 'text-primary-600 font-semibold' : 'text-gray-700',
                  item.highlight && !isActive(item.href) ? 'distributor-highlight' : ''
                ]}
              >
                {item.name}
                {item.highlight && !isActive(item.href) && (
                  <span class="absolute -top-1 -right-2 flex h-3 w-3">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-3 w-3 bg-primary-500"></span>
                  </span>
                )}
              </a>
            )}
            
            <!-- Mega Menu Dropdowns -->
            {item.megaMenuId === 'paper-items' && (
              <div class="mega-menu absolute left-0 top-full mt-2 w-screen max-w-5xl bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transform translate-y-4 transition-all duration-300 ease-out z-50">
                <div class="p-6">
                  <div class="grid grid-cols-3 gap-8">
                    <!-- Column 1: Paper Cups -->
                    <div>
                      <div class="bg-primary-500 text-white px-3 py-2 rounded-md mb-4">
                        <h3 class="font-semibold text-sm">Paper Cups</h3>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <a href="/disposable-paper-cups" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Disposable Paper Cups
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>50ml Paper Cup</li>
                            <li>60ml Paper Cup</li>
                            <li>80ml Paper Cup</li>
                            <li>100ml Paper Cup</li>
                            <li>120ml Paper Cup</li>
                            <li>150ml Paper Cup</li>
                            <li>200ml Paper Cup</li>
                            <li>250ml Paper Cup</li>
                            <li>350ml Paper Cup</li>
                            <li>400ml Paper Cup</li>
                            <li>Custom-Size Paper Cups</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/disposable-paper-cups" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Other Cups
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Double Wall Cups</li>
                            <li>Ripple Wall Cups</li>
                            <li>Coffee Sleeves</li>
                            <li>Ice-cream Cup</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Column 2: Paper Packaging -->
                    <div>
                      <div class="bg-primary-500 text-white px-3 py-2 rounded-md mb-4">
                        <h3 class="font-semibold text-sm">Paper Packaging</h3>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <a href="/food-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Food Packaging
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Pizza Box</li>
                            <li>Burger Boxes</li>
                            <li>Food Containers</li>
                            <li>Lunch Boxes</li>
                            <li>Sandwich Boxes</li>
                            <li>Cake Boxes</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/retail-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Retail Packaging
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Shopping Bags</li>
                            <li>Courier Bags</li>
                            <li>Product Labels</li>
                            <li>Custom Packaging</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/medical-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Medical Packaging
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Medicine Packaging</li>
                            <li>Patient Files</li>
                            <li>X-Ray Envelopes</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Column 3: Offset Printing -->
                    <div>
                      <div class="bg-primary-500 text-white px-3 py-2 rounded-md mb-4">
                        <h3 class="font-semibold text-sm">Offset Printing</h3>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <a href="/office-stationery" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Office Stationery
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Business Cards</li>
                            <li>Letterheads</li>
                            <li>Invoices</li>
                            <li>Envelopes</li>
                          </ul>
                        </div>
                        <div>
                          <a href="/marketing-materials" class="block font-semibold text-gray-900 hover:text-primary-600 mb-2 transition-colors">
                            Marketing Materials
                          </a>
                          <ul class="space-y-1 text-sm text-gray-600 ml-2">
                            <li>Brochures</li>
                            <li>Flyers</li>
                            <li>Catalogs</li>
                            <li>Banners</li>
                            <li>Stickers</li>
                            <li>Hang tags</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {item.megaMenuId === 'eco-items' && (
              <div class="mega-menu absolute left-0 top-full mt-2 w-screen max-w-3xl bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transform translate-y-4 transition-all duration-300 ease-out z-50">
                <div class="p-6">
                  <div class="grid grid-cols-2 gap-8">
                    <!-- Column 1: Areca Palm Products -->
                    <div>
                      <a href="/areca-palm-products" class="block font-semibold text-gray-900 hover:text-primary-600 mb-3 transition-colors">
                        Areca Palm leaf Products
                      </a>
                      <ul class="space-y-1 text-sm text-gray-600 ml-2">
                        <li>Areca palm leaf plates</li>
                        <li>Areca palm leaf Tray</li>
                        <li>Areca Leaf Bowl</li>
                        <li>Partitioned Plate</li>
                        <li>Square Plate</li>
                      </ul>
                    </div>
                    
                    <!-- Column 2: Wooden Products -->
                    <div>
                      <a href="/wooden-items" class="block font-semibold text-gray-900 hover:text-primary-600 mb-3 transition-colors">
                        Wooden Product
                      </a>
                      <ul class="space-y-1 text-sm text-gray-600 ml-2">
                        <li>Wooden Plates</li>
                        <li>Wooden Tray</li>
                        <li>Cutlery Set</li>
                        <li>Wooden Spoon</li>
                        <li>Wooden Fork</li>
                        <li>Bamboo Brush</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {item.megaMenuId === 'plastic-items' && (
              <div class="mega-menu absolute left-0 top-full mt-2 w-screen max-w-md bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible transform translate-y-4 transition-all duration-300 ease-out z-50">
                <div class="p-6">
                  <div>
                    <a href="/plastic-food-packaging" class="block font-semibold text-gray-900 hover:text-primary-600 mb-3 transition-colors">
                      Plastic Food Packaging
                    </a>
                    <ul class="space-y-1 text-sm text-gray-600 ml-2">
                      <li>Container/box</li>
                      <li>Cup</li>
                      <li>Takeaway Container Spoon</li>
                      <li>Straw</li>
                      <li>Strailer</li>
                      <li>Ice Cream Box</li>
                      <li>Pizza Lid Support</li>
                      <li>Water Bottle</li>
                      <li>Food Tray 4 Unit With Lid</li>
                      <li>Dry Cake Biscuit Tray</li>
                      <li>Thai Burger Box</li>
                      <li>Egg Tray</li>
                      <li>Sandwich Box</li>
                    </ul>
                  </div>
                </div>
              </div>
            )}
          </div>
        ))}
      </nav>
      
      <!-- CTA button -->
      <div class="hidden md:flex items-center justify-end md:flex-1 lg:w-0">
        <a href="tel:+8801976724401" class="btn btn-primary shadow-sm whitespace-nowrap px-4">
          01976724401
        </a>
      </div>
    </div>
  </div>
  
  <!-- Enhanced Mobile menu -->
  <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-white shadow-lg rounded-b-lg max-h-screen overflow-y-auto">
    <div class="pt-2 pb-4 px-4 space-y-2">
      <!-- Mobile Paper Items Accordion -->
      <div class="mobile-accordion border border-gray-200 rounded-lg mb-2">
        <button class="mobile-accordion-trigger w-full text-left px-4 py-3 rounded-lg text-base font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center bg-gray-50">
          <div class="flex items-center">
            <i class="fas fa-copy text-primary-600 mr-3 text-lg"></i>
            <span>Paper Items</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform mobile-accordion-icon text-primary-600"></i>
        </button>
        <div class="mobile-accordion-content hidden px-4 pb-4 space-y-4">
          <!-- Paper Cups Section -->
          <div class="border-l-2 border-primary-200 pl-4">
            <a href="/disposable-paper-cups" class="block font-semibold text-primary-700 mb-2 text-sm hover:text-primary-800">
              📱 Disposable Paper Cups
            </a>
            <div class="grid grid-cols-2 gap-2 text-xs text-gray-600">
              <div class="space-y-1">
                <div>• 50ml-100ml Cups</div>
                <div>• 120ml-150ml Cups</div>
                <div>• 200ml-250ml Cups</div>
              </div>
              <div class="space-y-1">
                <div>• 350ml-400ml Cups</div>
                <div>• Double Wall Cups</div>
                <div>• Custom Sizes</div>
              </div>
            </div>
          </div>
          
          <!-- Food Packaging Section -->
          <div class="border-l-2 border-green-200 pl-4">
            <a href="/food-packaging" class="block font-semibold text-green-700 mb-2 text-sm hover:text-green-800">
              🍕 Food Packaging
            </a>
            <div class="grid grid-cols-2 gap-2 text-xs text-gray-600">
              <div class="space-y-1">
                <div>• Pizza Boxes</div>
                <div>• Burger Boxes</div>
                <div>• Lunch Boxes</div>
              </div>
              <div class="space-y-1">
                <div>• Food Containers</div>
                <div>• Sandwich Boxes</div>
                <div>• Cake Boxes</div>
              </div>
            </div>
          </div>
          
          <!-- Other Paper Categories -->
          <div class="grid grid-cols-2 gap-3">
            <a href="/retail-packaging" class="p-2 bg-blue-50 rounded-md border border-blue-200">
              <div class="font-medium text-blue-700 text-sm">🛍️ Retail Packaging</div>
              <div class="text-xs text-blue-600">Bags, Labels, Custom</div>
            </a>
            <a href="/medical-packaging" class="p-2 bg-red-50 rounded-md border border-red-200">
              <div class="font-medium text-red-700 text-sm">🏥 Medical Packaging</div>
              <div class="text-xs text-red-600">Medicine, Files, X-Ray</div>
            </a>
          </div>
          
          <!-- Printing Services -->
          <div class="border-l-2 border-purple-200 pl-4">
            <div class="grid grid-cols-2 gap-3">
              <a href="/office-stationery" class="p-2 bg-purple-50 rounded-md border border-purple-200">
                <div class="font-medium text-purple-700 text-sm">📋 Office Stationery</div>
                <div class="text-xs text-purple-600">Cards, Letters, Invoices</div>
              </a>
              <a href="/marketing-materials" class="p-2 bg-indigo-50 rounded-md border border-indigo-200">
                <div class="font-medium text-indigo-700 text-sm">📢 Marketing Materials</div>
                <div class="text-xs text-indigo-600">Brochures, Flyers, Banners</div>
              </a>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Mobile Eco Items Accordion -->
      <div class="mobile-accordion border border-gray-200 rounded-lg mb-2">
        <button class="mobile-accordion-trigger w-full text-left px-4 py-3 rounded-lg text-base font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center bg-green-50">
          <div class="flex items-center">
            <i class="fas fa-leaf text-green-600 mr-3 text-lg"></i>
            <span>Eco Items</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform mobile-accordion-icon text-green-600"></i>
        </button>
        <div class="mobile-accordion-content hidden px-4 pb-4 space-y-4">
          <div class="grid grid-cols-1 gap-3">
            <a href="/areca-palm-products" class="p-3 bg-green-50 rounded-md border border-green-200">
              <div class="flex items-center mb-2">
                <span class="text-lg mr-2">🌿</span>
                <div class="font-semibold text-green-700">Areca Palm Products</div>
              </div>
              <div class="grid grid-cols-2 gap-2 text-xs text-green-600">
                <div>• Palm Leaf Plates</div>
                <div>• Areca Trays</div>
                <div>• Leaf Bowls</div>
                <div>• Square Plates</div>
              </div>
            </a>
            
            <a href="/wooden-items" class="p-3 bg-amber-50 rounded-md border border-amber-200">
              <div class="flex items-center mb-2">
                <span class="text-lg mr-2">🌳</span>
                <div class="font-semibold text-amber-700">Wooden Products</div>
              </div>
              <div class="grid grid-cols-2 gap-2 text-xs text-amber-600">
                <div>• Wooden Plates</div>
                <div>• Wooden Trays</div>
                <div>• Cutlery Sets</div>
                <div>• Bamboo Brushes</div>
              </div>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Mobile Plastic Items Accordion -->
      <div class="mobile-accordion border border-gray-200 rounded-lg mb-2">
        <button class="mobile-accordion-trigger w-full text-left px-4 py-3 rounded-lg text-base font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center bg-blue-50">
          <div class="flex items-center">
            <i class="fas fa-box text-blue-600 mr-3 text-lg"></i>
            <span>Plastic Items</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform mobile-accordion-icon text-blue-600"></i>
        </button>
        <div class="mobile-accordion-content hidden px-4 pb-4 space-y-4">
          <a href="/plastic-food-packaging" class="block p-3 bg-blue-50 rounded-md border border-blue-200">
            <div class="flex items-center mb-2">
              <span class="text-lg mr-2">🥤</span>
              <div class="font-semibold text-blue-700">Plastic Food Packaging</div>
            </div>
            <div class="grid grid-cols-2 gap-2 text-xs text-blue-600">
              <div class="space-y-1">
                <div>• Containers & Boxes</div>
                <div>• Plastic Cups</div>
                <div>• Takeaway Spoons</div>
                <div>• Straws & Accessories</div>
                <div>• Ice Cream Boxes</div>
                <div>• Water Bottles</div>
                <div>• Food Trays</div>
              </div>
              <div class="space-y-1">
                <div>• Thai Burger Boxes</div>
                <div>• Sandwich Boxes</div>
                <div>• Egg Trays</div>
                <div>• Pizza Lid Supports</div>
                <div>• Cake Biscuit Trays</div>
                <div>• Strailers</div>
                <div class="font-medium text-blue-700">13 Products Total</div>
              </div>
            </div>
          </a>
        </div>
      </div>
      
      <!-- Regular Mobile Menu Items -->
      <div class="space-y-1 mt-4 pt-4 border-t border-gray-200">
        <a href="/distributor" class="flex items-center px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600 mobile-distributor-highlight relative">
          <i class="fas fa-handshake text-primary-600 mr-3"></i>
          Distributor
          <span class="absolute top-2 right-3 flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-400 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-primary-500"></span>
          </span>
        </a>
        <a href="/faq" class="flex items-center px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600">
          <i class="fas fa-question-circle text-gray-500 mr-3"></i>
          FAQs
        </a>
        <a href="/about" class="flex items-center px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600">
          <i class="fas fa-info-circle text-gray-500 mr-3"></i>
          About Us
        </a>
        <a href="/contact" class="flex items-center px-4 py-3 rounded-lg text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-primary-600">
          <i class="fas fa-envelope text-gray-500 mr-3"></i>
          Contact
        </a>
      </div>
      
      <!-- Mobile CTA -->
      <div class="mt-4 pt-4 border-t border-gray-200">
        <a href="/contact" class="block w-full btn btn-primary text-center py-3 rounded-lg">
          <i class="fas fa-phone mr-2"></i>
          Get a Quote
        </a>
      </div>
    </div>
  </div>
</header>

<style>
  /* Mega Menu Styles - FIXED POSITIONING */
  .mega-menu-container:hover .mega-menu {
    @apply opacity-100 visible translate-y-0;
  }
  
  .mega-menu-container:hover .mega-menu-icon {
    @apply transform rotate-180;
  }
  
  /* FIXED: Better positioning for mega menus */
  .mega-menu {
    left: -100px; /* Move slightly to the right */
    transform: translateY(1rem);
  }
  
  .mega-menu-container:hover .mega-menu {
    transform: translateY(0);
  }
  
  /* Distributor highlight */
  .distributor-highlight {
    text-shadow: 0 0 5px rgba(0, 128, 1, 0.3);
    font-weight: 600;
    transition: transform 0.3s ease, text-shadow 0.3s ease;
  }
  
  .distributor-highlight:hover {
    transform: scale(1.05);
    text-shadow: 0 0 8px rgba(0, 128, 1, 0.5);
  }
  
  .mobile-distributor-highlight {
    font-weight: 600;
  }
  
  .distributor-highlight::after {
    content: '✨';
    position: absolute;
    top: -8px;
    right: -12px;
    font-size: 14px;
    animation: sparkle 1.5s infinite;
    opacity: 0.9;
  }
  
  @keyframes sparkle {
    0% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
    50% { opacity: 1; transform: scale(1.1) rotate(10deg); }
    100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
  }
  
  /* ENHANCED Mobile accordion styles */
  .mobile-accordion {
    transition: all 0.3s ease;
  }
  
  .mobile-accordion-trigger {
    transition: all 0.2s ease;
  }
  
  .mobile-accordion-trigger:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .mobile-accordion-trigger.active {
    background-color: #f3f4f6;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
  
  .mobile-accordion-trigger.active .mobile-accordion-icon {
    @apply transform rotate-180 text-primary-700;
  }
  
  .mobile-accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
  }
  
  .mobile-accordion-trigger.active + .mobile-accordion-content {
    max-height: 600px;
    padding-top: 1rem;
    padding-bottom: 1rem;
  }
  
  /* Mobile menu container */
  #mobile-menu {
    border-top: 1px solid #e5e7eb;
    background: linear-gradient(to bottom, #ffffff, #f9fafb);
  }
  
  /* Smooth transitions for all interactive elements */
  .mobile-accordion a,
  .mobile-accordion button {
    transition: all 0.2s ease;
  }
  
  .mobile-accordion a:hover {
    transform: translateX(2px);
  }
  
  /* Enhanced visual feedback */
  .mobile-accordion-content > div {
    border-radius: 8px;
    transition: all 0.2s ease;
  }
  
  .mobile-accordion-content > div:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }
</style>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
      mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());
      mobileMenu.classList.toggle('hidden');
    });
  }
  
  // Enhanced mobile accordion functionality
  const accordionTriggers = document.querySelectorAll('.mobile-accordion-trigger');
  
  accordionTriggers.forEach(trigger => {
    trigger.addEventListener('click', () => {
      const content = trigger.nextElementSibling;
      const isActive = trigger.classList.contains('active');
      
      // Close all other accordions with smooth animation
      accordionTriggers.forEach(otherTrigger => {
        if (otherTrigger !== trigger) {
          otherTrigger.classList.remove('active');
          const otherContent = otherTrigger.nextElementSibling;
          otherContent.classList.add('hidden');
          setTimeout(() => {
            otherContent.style.maxHeight = '0';
          }, 10);
        }
      });
      
      // Toggle current accordion
      if (!isActive) {
        trigger.classList.add('active');
        content.classList.remove('hidden');
        // Small delay to ensure smooth animation
        setTimeout(() => {
          content.style.maxHeight = content.scrollHeight + 'px';
        }, 10);
      } else {
        trigger.classList.remove('active');
        content.style.maxHeight = '0';
        setTimeout(() => {
          content.classList.add('hidden');
        }, 400);
      }
    });
  });
  
  // Close mobile menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('header') && mobileMenu && !mobileMenu.classList.contains('hidden')) {
      mobileMenu.classList.add('hidden');
      mobileMenuButton.setAttribute('aria-expanded', 'false');
    }
  });
  
  // Close mega menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.mega-menu-container')) {
      // Optional: Add logic to hide mega menus if needed
    }
  });
</script>